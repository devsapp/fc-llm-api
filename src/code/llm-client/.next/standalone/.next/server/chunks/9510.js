exports.id = 9510;
exports.ids = [9510];
exports.modules = {

/***/ 12670:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18038);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _path, _path2;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgDelete = function SvgDelete(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    width: 14.663,
    height: 14.663,
    fill: "none"
  }, props), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", {
    style: {
      mixBlendMode: "passthrough"
    }
  }, _path || (_path = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    fill: "#D8D8D8",
    fillOpacity: 0.01,
    fillRule: "evenodd",
    d: "M7.337.667c-3.69 0-6.67 2.98-6.67 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66a6.66 6.66 0 0 0-6.66-6.67Z"
  })), _path2 || (_path2 = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    fill: "#333",
    d: "m10.138 5.471-4.667 4.667q-.046.046-.1.083-.055.036-.116.062-.06.025-.125.038-.064.012-.13.012t-.13-.012q-.064-.013-.125-.038-.06-.026-.115-.062-.055-.037-.101-.083-.047-.046-.083-.101-.037-.055-.062-.115-.025-.06-.038-.125-.013-.065-.013-.13 0-.066.013-.13.013-.065.038-.125.025-.061.062-.116.036-.054.083-.1l4.666-4.667q.047-.047.101-.083.055-.037.116-.062.06-.025.125-.038.064-.013.13-.013.065 0 .13.013.064.013.125.038.06.025.115.062.055.036.101.083.046.046.083.1.036.055.062.116.025.06.038.125.012.064.012.13t-.012.13q-.013.064-.038.125-.026.06-.062.115-.037.055-.083.101ZM5.471 4.53l.667.666q.046.047.083.101.036.055.062.116.025.06.038.125.012.064.012.13 0 .065-.012.13-.013.064-.038.125-.026.06-.062.115-.036.055-.083.101-.046.046-.1.083-.056.036-.116.062-.06.025-.125.038-.065.012-.13.012-.066 0-.13-.012-.065-.013-.125-.038-.061-.026-.116-.062-.054-.036-.1-.083l-.667-.667q-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.013-.064-.013-.13t.013-.13q.013-.064.038-.125.025-.06.062-.115.036-.055.083-.101.046-.047.1-.083.055-.037.116-.062.06-.025.125-.038.064-.013.13-.013t.13.013q.064.013.125.038.06.025.115.062.055.036.101.083Zm4 4 .667.666q.046.047.083.101.036.055.062.116.025.06.038.125.012.064.012.13 0 .065-.012.13-.013.064-.038.125-.026.06-.062.115-.036.055-.083.101-.046.046-.1.083-.056.036-.116.062-.06.025-.125.038-.065.012-.13.012-.066 0-.13-.012-.065-.013-.125-.038-.061-.026-.116-.062-.054-.036-.1-.083l-.667-.667q-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.013-.064-.013-.13t.013-.13q.013-.064.038-.125.025-.06.062-.115.036-.055.083-.101.046-.047.1-.083.055-.037.116-.062.06-.025.125-.038.064-.013.13-.013t.13.013q.064.013.125.038.06.025.115.062.055.036.101.083Zm3.859-1.192q0-2.491-1.755-4.248-1.754-1.756-4.238-1.756-2.492 0-4.248 1.756-1.756 1.756-1.756 4.248 0 2.484 1.756 4.238 1.757 1.755 4.248 1.755 2.484 0 4.238-1.755 1.755-1.754 1.755-4.238Zm1.333 0q0 3.036-2.145 5.181t-5.181 2.145q-3.043 0-5.19-2.145Q0 10.374 0 7.337q0-3.044 2.147-5.19Q4.293 0 7.337 0q3.037 0 5.181 2.147 2.145 2.147 2.145 5.19ZM10.332 5q0 .066-.013.13t-.038.125q-.025.06-.061.114-.037.055-.083.101-.046.047-.1.083-.055.036-.116.061-.06.025-.125.038-.064.013-.13.013-.065 0-.13-.013-.063-.013-.124-.038-.06-.025-.115-.061-.054-.036-.1-.083-.047-.046-.083-.1-.037-.055-.062-.115-.025-.061-.038-.125-.012-.064-.012-.13 0-.065.012-.13.013-.064.038-.124.025-.061.062-.115.036-.055.082-.101.047-.047.101-.083.055-.036.115-.061.06-.025.125-.038.064-.013.13-.013.065 0 .13.013.064.013.124.038t.115.061q.055.036.1.083.047.046.084.1.036.055.061.116.025.06.038.124.013.065.013.13ZM5.665 9.667q0 .065-.013.13-.013.064-.038.124t-.061.115q-.036.055-.083.1-.046.047-.1.084-.055.036-.116.061-.06.025-.124.038-.064.013-.13.013-.065 0-.13-.013-.064-.013-.124-.038-.061-.025-.115-.061-.055-.037-.101-.083-.047-.046-.083-.1-.036-.055-.061-.116-.025-.06-.038-.125-.013-.064-.013-.13 0-.065.013-.13.013-.063.038-.124.025-.06.061-.115.036-.054.083-.1.046-.047.1-.083.055-.037.116-.062.06-.025.124-.038.065-.012.13-.012.066 0 .13.012.064.013.124.038.061.025.115.062.055.036.101.082.047.047.083.101.036.055.061.115.025.06.038.125.013.064.013.13Zm0-4.667q0 .066-.013.13t-.038.125q-.025.06-.061.114-.036.055-.083.101-.046.047-.1.083-.055.036-.116.061-.06.025-.124.038-.064.013-.13.013-.065 0-.13-.013-.064-.013-.124-.038-.061-.025-.115-.061-.055-.036-.101-.083-.047-.046-.083-.1-.036-.055-.061-.115-.025-.061-.038-.125-.013-.064-.013-.13 0-.065.013-.13.013-.064.038-.124.025-.061.061-.115.036-.055.083-.101.046-.047.1-.083.055-.036.116-.061.06-.025.124-.038.065-.013.13-.013.066 0 .13.013t.124.038q.061.025.115.061.055.036.101.083.047.046.083.1.036.055.061.116.025.06.038.124.013.065.013.13Zm.667.667q0 .065-.013.13-.013.064-.038.124t-.061.115q-.037.055-.083.1-.046.047-.1.084-.055.036-.116.061-.06.025-.125.038-.064.013-.13.013-.065 0-.13-.013-.063-.013-.124-.038-.06-.025-.115-.061-.054-.037-.1-.083-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.012-.064-.012-.13 0-.065.012-.13.013-.063.038-.124.025-.06.062-.115.036-.054.082-.1.047-.047.101-.083.055-.037.115-.062.06-.025.125-.038.064-.012.13-.012.065 0 .13.012.064.013.124.038t.115.062q.055.036.1.082.047.047.084.101.036.055.061.115.025.06.038.125.013.064.013.13ZM9.665 9q0 .066-.013.13t-.038.125q-.025.06-.061.114-.036.055-.083.101-.046.047-.1.083-.055.036-.116.061-.06.025-.124.038-.064.013-.13.013-.065 0-.13-.013-.064-.013-.124-.038-.061-.025-.115-.061-.055-.036-.101-.083-.047-.046-.083-.1-.036-.055-.061-.115-.025-.061-.038-.125-.013-.064-.013-.13 0-.065.013-.13.013-.064.038-.124.025-.061.061-.115.036-.055.083-.101.046-.047.1-.083.055-.036.116-.061.06-.025.124-.038.065-.013.13-.013.066 0 .13.013t.124.038q.061.025.115.061.055.036.101.083.047.046.083.1.036.055.061.116.025.06.038.124.013.065.013.13Zm.667.667q0 .065-.013.13-.013.064-.038.124t-.061.115q-.037.055-.083.1-.046.047-.1.084-.055.036-.116.061-.06.025-.125.038-.064.013-.13.013-.065 0-.13-.013-.063-.013-.124-.038-.06-.025-.115-.061-.054-.037-.1-.083-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.012-.064-.012-.13 0-.065.012-.13.013-.063.038-.124.025-.06.062-.115.036-.054.082-.1.047-.047.101-.083.055-.037.115-.062.06-.025.125-.038.064-.012.13-.012.065 0 .13.012.064.013.124.038t.115.062q.055.036.1.082.047.047.084.101.036.055.061.115.025.06.038.125.013.064.013.13Z"
  }))));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SvgDelete);

/***/ }),

/***/ 13262:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18038);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _defs, _mask;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgDownload = function SvgDownload(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), _defs || (_defs = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("defs", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    id: "download_svg__a",
    d: "M0 0h16v16H0z"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", null, _mask || (_mask = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("mask", {
    id: "download_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("use", {
    xlinkHref: "#download_svg__a"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("g", {
    mask: "url(#download_svg__b)"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    d: "M1 12h10c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1H1C.45 0 0 .45 0 1v10c0 .55.45 1 1 1Z",
    transform: "translate(2 2)"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    d: "M0 0h3.67l.66 1.33H9L9.67 0h3.66",
    transform: "translate(1.333 10.333)"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    d: "M0 3.33V0",
    transform: "translate(14 8.667)"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    d: "m0 0 2 2 2-2",
    transform: "translate(6 7.333)"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    d: "M0 5.33V0",
    transform: "translate(8 4)"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    style: {
      stroke: "#333",
      strokeWidth: 1.3333333333333333,
      strokeOpacity: 1,
      strokeDasharray: "0 0"
    },
    d: "M0 3.33V0",
    transform: "translate(2 8.667)"
  }))));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SvgDownload);

/***/ }),

/***/ 99510:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  ContextPrompts: () => (/* binding */ ContextPrompts),
  MaskAvatar: () => (/* binding */ MaskAvatar),
  MaskConfig: () => (/* binding */ MaskConfig),
  MaskPage: () => (/* binding */ MaskPage)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(56786);
// EXTERNAL MODULE: ./app/components/button.tsx
var components_button = __webpack_require__(69168);
// EXTERNAL MODULE: ./app/components/error.tsx
var error = __webpack_require__(22969);
// EXTERNAL MODULE: ./app/components/mask.module.scss
var mask_module = __webpack_require__(35390);
var mask_module_default = /*#__PURE__*/__webpack_require__.n(mask_module);
// EXTERNAL MODULE: ./app/icons/download.svg
var download = __webpack_require__(13262);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(18038);
;// CONCATENATED MODULE: ./app/icons/upload.svg
var _mask, _defs;
function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var SvgUpload = function SvgUpload(props) {
  return /*#__PURE__*/react_.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    width: 16,
    height: 16,
    fill: "none"
  }, props), /*#__PURE__*/react_.createElement("g", null, _mask || (_mask = /*#__PURE__*/react_.createElement("mask", {
    id: "upload_svg__b",
    fill: "#fff"
  }, /*#__PURE__*/react_.createElement("use", {
    xlinkHref: "#upload_svg__a"
  }))), /*#__PURE__*/react_.createElement("g", {
    mask: "url(#upload_svg__b)"
  }, /*#__PURE__*/react_.createElement("path", {
    style: {
      fill: "#333",
      opacity: 1
    },
    d: "M1.822 14.178A1.659 1.659 0 0 1 1.333 13V3a1.658 1.658 0 0 1 .489-1.178A1.658 1.658 0 0 1 3 1.333h10a1.659 1.659 0 0 1 1.178.489A1.658 1.658 0 0 1 14.667 3v10a1.659 1.659 0 0 1-1.018 1.535 1.643 1.643 0 0 1-.649.132H3a1.658 1.658 0 0 1-1.178-.489zm11.413-.943a.32.32 0 0 0 .098-.235V3a.32.32 0 0 0-.098-.235.32.32 0 0 0-.235-.098H3a.32.32 0 0 0-.235.098.32.32 0 0 0-.098.235v10c0 .09.033.17.098.235a.32.32 0 0 0 .235.098h10a.32.32 0 0 0 .235-.098z"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      fill: "#333",
      opacity: 1
    },
    d: "M5.186 9.692a.664.664 0 0 1 .415.345l.476.96h3.846l.485-.964a.66.66 0 0 1 .414-.341.664.664 0 0 1 .181-.025h3.66a.665.665 0 0 1 .654.796.667.667 0 0 1-.654.537h-3.249l-.485.963a.665.665 0 0 1-.596.367h-4.67a.664.664 0 0 1-.597-.37L4.59 11H1.333a.666.666 0 1 1 0-1.333h3.67c.062 0 .123.008.183.025z"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      fill: "#333",
      opacity: 1
    },
    d: "M13.333 12V8.667a.666.666 0 1 1 1.334 0V12a.666.666 0 1 1-1.334 0zM7.63 3.446a.664.664 0 0 1 .841.083l2 2a.667.667 0 0 1-.942.942L8 4.943 6.471 6.47A.66.66 0 0 1 6 6.667a.66.66 0 0 1-.554-.297.665.665 0 0 1 .083-.841l2-2a.665.665 0 0 1 .1-.083z"
  }), /*#__PURE__*/react_.createElement("path", {
    style: {
      fill: "#333",
      opacity: 1
    },
    d: "M8.667 4v5.333a.665.665 0 0 1-1.037.554.665.665 0 0 1-.297-.554V4a.665.665 0 0 1 1.037-.554.665.665 0 0 1 .297.554zM1.333 12V8.667a.665.665 0 0 1 1.037-.555.665.665 0 0 1 .297.555V12a.665.665 0 0 1-1.138.471.664.664 0 0 1-.196-.471z"
  }))), _defs || (_defs = /*#__PURE__*/react_.createElement("defs", null, /*#__PURE__*/react_.createElement("path", {
    id: "upload_svg__a",
    d: "M0 0h16v16H0z"
  }))));
};
/* harmony default export */ const upload = (SvgUpload);
// EXTERNAL MODULE: ./app/icons/edit.svg
var edit = __webpack_require__(9127);
// EXTERNAL MODULE: ./app/icons/add.svg
var add = __webpack_require__(32263);
// EXTERNAL MODULE: ./app/icons/close.svg
var icons_close = __webpack_require__(26989);
// EXTERNAL MODULE: ./app/icons/delete.svg
var icons_delete = __webpack_require__(12670);
// EXTERNAL MODULE: ./app/icons/eye.svg
var eye = __webpack_require__(32168);
// EXTERNAL MODULE: ./app/icons/copy.svg
var copy = __webpack_require__(81482);
// EXTERNAL MODULE: ./app/icons/drag.svg
var drag = __webpack_require__(59880);
// EXTERNAL MODULE: ./app/store/mask.ts
var mask = __webpack_require__(27736);
// EXTERNAL MODULE: ./app/store/index.ts + 2 modules
var store = __webpack_require__(87079);
// EXTERNAL MODULE: ./app/client/api.ts + 1 modules
var api = __webpack_require__(96083);
// EXTERNAL MODULE: ./app/components/ui-lib.tsx + 3 modules
var ui_lib = __webpack_require__(5129);
// EXTERNAL MODULE: ./app/components/emoji.tsx + 1 modules
var emoji = __webpack_require__(6862);
// EXTERNAL MODULE: ./app/locales/index.ts + 17 modules
var locales = __webpack_require__(70663);
// EXTERNAL MODULE: ./node_modules/react-router-dom/dist/umd/react-router-dom.production.min.js
var react_router_dom_production_min = __webpack_require__(5666);
// EXTERNAL MODULE: ./app/components/chat.module.scss
var chat_module = __webpack_require__(73071);
var chat_module_default = /*#__PURE__*/__webpack_require__.n(chat_module);
// EXTERNAL MODULE: ./app/utils.ts
var utils = __webpack_require__(54289);
// EXTERNAL MODULE: ./app/components/model-config.tsx
var model_config = __webpack_require__(98581);
// EXTERNAL MODULE: ./app/constant.ts
var constant = __webpack_require__(14751);
// EXTERNAL MODULE: ./app/masks/index.ts + 2 modules
var app_masks = __webpack_require__(20918);
// EXTERNAL MODULE: ./node_modules/@hello-pangea/dnd/dist/dnd.cjs.js
var dnd_cjs = __webpack_require__(32470);
;// CONCATENATED MODULE: ./app/components/mask.tsx



























// drag and drop helper function
function reorder(list, startIndex, endIndex) {
    const result = [
        ...list
    ];
    const [removed] = result.splice(startIndex, 1);
    result.splice(endIndex, 0, removed);
    return result;
}
function MaskAvatar(props) {
    return props.mask.avatar !== mask/* DEFAULT_MASK_AVATAR */._G ? /*#__PURE__*/ jsx_runtime_.jsx(emoji/* Avatar */.qE, {
        avatar: props.mask.avatar
    }) : /*#__PURE__*/ jsx_runtime_.jsx(emoji/* Avatar */.qE, {
        model: props.mask.modelConfig.model
    });
}
function MaskConfig(props) {
    const [showPicker, setShowPicker] = (0,react_.useState)(false);
    const updateConfig = (updater)=>{
        if (props.readonly) return;
        const config = {
            ...props.mask.modelConfig
        };
        updater(config);
        props.updateMask((mask)=>{
            mask.modelConfig = config;
            // if user changed current session mask, it will disable auto sync
            mask.syncGlobalConfig = false;
        });
    };
    const copyMaskLink = ()=>{
        const maskLink = `${location.protocol}//${location.host}/#${constant/* Path */.y$.NewChat}?mask=${props.mask.id}`;
        (0,utils/* copyToClipboard */.vQ)(maskLink);
    };
    const globalConfig = (0,store/* useAppConfig */.MG)();
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx(ContextPrompts, {
                context: props.mask.context,
                updateContext: (updater)=>{
                    const context = props.mask.context.slice();
                    updater(context);
                    props.updateMask((mask)=>mask.context = context);
                }
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_lib/* List */.aV, {
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* ListItem */.HC, {
                        title: locales/* default */.ZP.Mask.Config.Avatar,
                        children: /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* Popover */.J2, {
                            content: /*#__PURE__*/ jsx_runtime_.jsx(emoji/* AvatarPicker */.aR, {
                                onEmojiClick: (emoji)=>{
                                    props.updateMask((mask)=>mask.avatar = emoji);
                                    setShowPicker(false);
                                }
                            }),
                            open: showPicker,
                            onClose: ()=>setShowPicker(false),
                            children: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                onClick: ()=>setShowPicker(true),
                                style: {
                                    cursor: "pointer"
                                },
                                children: /*#__PURE__*/ jsx_runtime_.jsx(MaskAvatar, {
                                    mask: props.mask
                                })
                            })
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* ListItem */.HC, {
                        title: locales/* default */.ZP.Mask.Config.Name,
                        children: /*#__PURE__*/ jsx_runtime_.jsx("input", {
                            type: "text",
                            value: props.mask.name,
                            onInput: (e)=>props.updateMask((mask)=>{
                                    mask.name = e.currentTarget.value;
                                })
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* ListItem */.HC, {
                        title: locales/* default */.ZP.Mask.Config.HideContext.Title,
                        subTitle: locales/* default */.ZP.Mask.Config.HideContext.SubTitle,
                        children: /*#__PURE__*/ jsx_runtime_.jsx("input", {
                            type: "checkbox",
                            checked: props.mask.hideContext,
                            onChange: (e)=>{
                                props.updateMask((mask)=>{
                                    mask.hideContext = e.currentTarget.checked;
                                });
                            }
                        })
                    }),
                    !props.shouldSyncFromGlobal ? /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* ListItem */.HC, {
                        title: locales/* default */.ZP.Mask.Config.Share.Title,
                        subTitle: locales/* default */.ZP.Mask.Config.Share.SubTitle,
                        children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                            icon: /*#__PURE__*/ jsx_runtime_.jsx(copy/* default */.Z, {}),
                            text: locales/* default */.ZP.Mask.Config.Share.Action,
                            onClick: copyMaskLink
                        })
                    }) : null,
                    props.shouldSyncFromGlobal ? /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* ListItem */.HC, {
                        title: locales/* default */.ZP.Mask.Config.Sync.Title,
                        subTitle: locales/* default */.ZP.Mask.Config.Sync.SubTitle,
                        children: /*#__PURE__*/ jsx_runtime_.jsx("input", {
                            type: "checkbox",
                            checked: props.mask.syncGlobalConfig,
                            onChange: async (e)=>{
                                const checked = e.currentTarget.checked;
                                if (checked && await (0,ui_lib/* showConfirm */.i0)(locales/* default */.ZP.Mask.Config.Sync.Confirm)) {
                                    props.updateMask((mask)=>{
                                        mask.syncGlobalConfig = checked;
                                        mask.modelConfig = {
                                            ...globalConfig.modelConfig
                                        };
                                    });
                                } else if (!checked) {
                                    props.updateMask((mask)=>{
                                        mask.syncGlobalConfig = checked;
                                    });
                                }
                            }
                        })
                    }) : null
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_lib/* List */.aV, {
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(model_config/* ModelConfigList */.j, {
                        modelConfig: {
                            ...props.mask.modelConfig
                        },
                        updateConfig: updateConfig
                    }),
                    props.extraListItems
                ]
            })
        ]
    });
}
function ContextPromptItem(props) {
    const [focusingInput, setFocusingInput] = (0,react_.useState)(false);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: (chat_module_default())["context-prompt-row"],
        children: [
            !focusingInput && /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: (chat_module_default())["context-drag"],
                        children: /*#__PURE__*/ jsx_runtime_.jsx(drag/* default */.Z, {})
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* Select */.Ph, {
                        value: props.prompt.role,
                        className: (chat_module_default())["context-role"],
                        onChange: (e)=>props.update({
                                ...props.prompt,
                                role: e.target.value
                            }),
                        children: api/* ROLES */.K$.map((r)=>/*#__PURE__*/ jsx_runtime_.jsx("option", {
                                value: r,
                                children: r
                            }, r))
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* Input */.II, {
                value: props.prompt.content,
                type: "text",
                className: (chat_module_default())["context-content"],
                rows: focusingInput ? 5 : 1,
                onFocus: ()=>setFocusingInput(true),
                onBlur: ()=>{
                    setFocusingInput(false);
                    // If the selection is not removed when the user loses focus, some
                    // extensions like "Translate" will always display a floating bar
                    window?.getSelection()?.removeAllRanges();
                },
                onInput: (e)=>props.update({
                        ...props.prompt,
                        content: e.currentTarget.value
                    })
            }),
            !focusingInput && /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                icon: /*#__PURE__*/ jsx_runtime_.jsx(icons_delete/* default */.Z, {}),
                className: (chat_module_default())["context-delete-button"],
                onClick: ()=>props.remove(),
                bordered: true
            })
        ]
    });
}
function ContextPrompts(props) {
    const context = props.context;
    const addContextPrompt = (prompt, i)=>{
        props.updateContext((context)=>context.splice(i, 0, prompt));
    };
    const removeContextPrompt = (i)=>{
        props.updateContext((context)=>context.splice(i, 1));
    };
    const updateContextPrompt = (i, prompt)=>{
        props.updateContext((context)=>context[i] = prompt);
    };
    const onDragEnd = (result)=>{
        if (!result.destination) {
            return;
        }
        const newContext = reorder(context, result.source.index, result.destination.index);
        props.updateContext((context)=>{
            context.splice(0, context.length, ...newContext);
        });
    };
    return /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {
        children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
            className: (chat_module_default())["context-prompt"],
            style: {
                marginBottom: 20
            },
            children: [
                /*#__PURE__*/ jsx_runtime_.jsx(dnd_cjs/* DragDropContext */.Z5, {
                    onDragEnd: onDragEnd,
                    children: /*#__PURE__*/ jsx_runtime_.jsx(dnd_cjs/* Droppable */.bK, {
                        droppableId: "context-prompt-list",
                        children: (provided)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                ref: provided.innerRef,
                                ...provided.droppableProps,
                                children: [
                                    context.map((c, i)=>/*#__PURE__*/ jsx_runtime_.jsx(dnd_cjs/* Draggable */._l, {
                                            draggableId: c.id || i.toString(),
                                            index: i,
                                            children: (provided)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                    ref: provided.innerRef,
                                                    ...provided.draggableProps,
                                                    ...provided.dragHandleProps,
                                                    children: [
                                                        /*#__PURE__*/ jsx_runtime_.jsx(ContextPromptItem, {
                                                            index: i,
                                                            prompt: c,
                                                            update: (prompt)=>updateContextPrompt(i, prompt),
                                                            remove: ()=>removeContextPrompt(i)
                                                        }),
                                                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                            className: (chat_module_default())["context-prompt-insert"],
                                                            onClick: ()=>{
                                                                addContextPrompt((0,store/* createMessage */.tn)({
                                                                    role: "user",
                                                                    content: "",
                                                                    date: new Date().toLocaleString()
                                                                }), i + 1);
                                                            },
                                                            children: /*#__PURE__*/ jsx_runtime_.jsx(add/* default */.Z, {})
                                                        })
                                                    ]
                                                })
                                        }, c.id)),
                                    provided.placeholder
                                ]
                            })
                    })
                }),
                props.context.length === 0 && /*#__PURE__*/ jsx_runtime_.jsx("div", {
                    className: (chat_module_default())["context-prompt-row"],
                    children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                        icon: /*#__PURE__*/ jsx_runtime_.jsx(add/* default */.Z, {}),
                        text: locales/* default */.ZP.Context.Add,
                        bordered: true,
                        className: (chat_module_default())["context-prompt-button"],
                        onClick: ()=>addContextPrompt((0,store/* createMessage */.tn)({
                                role: "user",
                                content: "",
                                date: ""
                            }), props.context.length)
                    })
                })
            ]
        })
    });
}
function MaskPage() {
    const navigate = (0,react_router_dom_production_min.useNavigate)();
    const maskStore = (0,mask/* useMaskStore */.Zy)();
    const chatStore = (0,store/* useChatStore */.aK)();
    const [filterLang, setFilterLang] = (0,react_.useState)();
    const allMasks = maskStore.getAll().filter((m)=>!filterLang || m.lang === filterLang);
    const [searchMasks, setSearchMasks] = (0,react_.useState)([]);
    const [searchText, setSearchText] = (0,react_.useState)("");
    const masks = searchText.length > 0 ? searchMasks : allMasks;
    // simple search, will refactor later
    const onSearch = (text)=>{
        setSearchText(text);
        if (text.length > 0) {
            const result = allMasks.filter((m)=>m.name.includes(text));
            setSearchMasks(result);
        } else {
            setSearchMasks(allMasks);
        }
    };
    const [editingMaskId, setEditingMaskId] = (0,react_.useState)();
    const editingMask = maskStore.get(editingMaskId) ?? app_masks/* BUILTIN_MASK_STORE */.$n.get(editingMaskId);
    const closeMaskModal = ()=>setEditingMaskId(undefined);
    const downloadAll = ()=>{
        (0,utils/* downloadAs */.CP)(JSON.stringify(masks), constant/* FileName */.dJ.Masks);
    };
    const importFromFile = ()=>{
        (0,utils/* readFromFile */.j2)().then((content)=>{
            try {
                const importMasks = JSON.parse(content);
                if (Array.isArray(importMasks)) {
                    for (const mask of importMasks){
                        if (mask.name) {
                            maskStore.create(mask);
                        }
                    }
                    return;
                }
                //if the content is a single mask.
                if (importMasks.name) {
                    maskStore.create(importMasks);
                }
            } catch  {}
        });
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(error/* ErrorBoundary */.S, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: (mask_module_default())["mask-page"],
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: "window-header",
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: "window-header-title",
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: "window-header-main-title",
                                        children: locales/* default */.ZP.Mask.Page.Title
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: "window-header-submai-title",
                                        children: locales/* default */.ZP.Mask.Page.SubTitle(allMasks.length)
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: "window-actions",
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: "window-action-button",
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                            icon: /*#__PURE__*/ jsx_runtime_.jsx(download/* default */.Z, {}),
                                            bordered: true,
                                            onClick: downloadAll
                                        })
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: "window-action-button",
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                            icon: /*#__PURE__*/ jsx_runtime_.jsx(upload, {}),
                                            bordered: true,
                                            onClick: ()=>importFromFile()
                                        })
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: "window-action-button",
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                            icon: /*#__PURE__*/ jsx_runtime_.jsx(icons_close/* default */.Z, {}),
                                            bordered: true,
                                            onClick: ()=>navigate(-1)
                                        })
                                    })
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: (mask_module_default())["mask-page-body"],
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: (mask_module_default())["mask-filter"],
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                        type: "text",
                                        className: (mask_module_default())["search-bar"],
                                        placeholder: locales/* default */.ZP.Mask.Page.Search,
                                        autoFocus: true,
                                        onInput: (e)=>onSearch(e.currentTarget.value)
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_lib/* Select */.Ph, {
                                        className: (mask_module_default())["mask-filter-lang"],
                                        value: filterLang ?? locales/* default */.ZP.Settings.Lang.All,
                                        onChange: (e)=>{
                                            const value = e.currentTarget.value;
                                            if (value === locales/* default */.ZP.Settings.Lang.All) {
                                                setFilterLang(undefined);
                                            } else {
                                                setFilterLang(value);
                                            }
                                        },
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                value: locales/* default */.ZP.Settings.Lang.All,
                                                children: locales/* default */.ZP.Settings.Lang.All
                                            }, "all"),
                                            locales/* AllLangs */.DC.map((lang)=>/*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                    value: lang,
                                                    children: locales/* ALL_LANG_OPTIONS */.nW[lang]
                                                }, lang))
                                        ]
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                        className: (mask_module_default())["mask-create"],
                                        icon: /*#__PURE__*/ jsx_runtime_.jsx(add/* default */.Z, {}),
                                        text: locales/* default */.ZP.Mask.Page.Create,
                                        bordered: true,
                                        onClick: ()=>{
                                            const createdMask = maskStore.create();
                                            setEditingMaskId(createdMask.id);
                                        }
                                    })
                                ]
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                children: masks.map((m)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                        className: (mask_module_default())["mask-item"],
                                        children: [
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                className: (mask_module_default())["mask-header"],
                                                children: [
                                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                        className: (mask_module_default())["mask-icon"],
                                                        children: /*#__PURE__*/ jsx_runtime_.jsx(MaskAvatar, {
                                                            mask: m
                                                        })
                                                    }),
                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                        className: (mask_module_default())["mask-title"],
                                                        children: [
                                                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                                className: (mask_module_default())["mask-name"],
                                                                children: m.name
                                                            }),
                                                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                                className: (mask_module_default())["mask-info"] + " one-line",
                                                                children: `${locales/* default */.ZP.Mask.Item.Info(m.context.length)} / ${locales/* ALL_LANG_OPTIONS */.nW[m.lang]} / ${m.modelConfig.model}`
                                                            })
                                                        ]
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                className: (mask_module_default())["mask-actions"],
                                                children: [
                                                    /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                                        icon: /*#__PURE__*/ jsx_runtime_.jsx(add/* default */.Z, {}),
                                                        text: locales/* default */.ZP.Mask.Item.Chat,
                                                        onClick: ()=>{
                                                            chatStore.newSession(m);
                                                            navigate(constant/* Path */.y$.Chat);
                                                        }
                                                    }),
                                                    m.builtin ? /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                                        icon: /*#__PURE__*/ jsx_runtime_.jsx(eye/* default */.Z, {}),
                                                        text: locales/* default */.ZP.Mask.Item.View,
                                                        onClick: ()=>setEditingMaskId(m.id)
                                                    }) : /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                                        icon: /*#__PURE__*/ jsx_runtime_.jsx(edit/* default */.Z, {}),
                                                        text: locales/* default */.ZP.Mask.Item.Edit,
                                                        onClick: ()=>setEditingMaskId(m.id)
                                                    }),
                                                    !m.builtin && /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                                                        icon: /*#__PURE__*/ jsx_runtime_.jsx(icons_delete/* default */.Z, {}),
                                                        text: locales/* default */.ZP.Mask.Item.Delete,
                                                        onClick: async ()=>{
                                                            if (await (0,ui_lib/* showConfirm */.i0)(locales/* default */.ZP.Mask.Item.DeleteConfirm)) {
                                                                maskStore.delete(m.id);
                                                            }
                                                        }
                                                    })
                                                ]
                                            })
                                        ]
                                    }, m.id))
                            })
                        ]
                    })
                ]
            }),
            editingMask && /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "modal-mask",
                children: /*#__PURE__*/ jsx_runtime_.jsx(ui_lib/* Modal */.u_, {
                    title: locales/* default */.ZP.Mask.EditModal.Title(editingMask?.builtin),
                    onClose: closeMaskModal,
                    actions: [
                        /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                            icon: /*#__PURE__*/ jsx_runtime_.jsx(download/* default */.Z, {}),
                            text: locales/* default */.ZP.Mask.EditModal.Download,
                            bordered: true,
                            onClick: ()=>(0,utils/* downloadAs */.CP)(JSON.stringify(editingMask), `${editingMask.name}.json`)
                        }, "export"),
                        /*#__PURE__*/ jsx_runtime_.jsx(components_button/* IconButton */.h, {
                            icon: /*#__PURE__*/ jsx_runtime_.jsx(copy/* default */.Z, {}),
                            bordered: true,
                            text: locales/* default */.ZP.Mask.EditModal.Clone,
                            onClick: ()=>{
                                navigate(constant/* Path */.y$.Masks);
                                maskStore.create(editingMask);
                                setEditingMaskId(undefined);
                            }
                        }, "copy")
                    ],
                    children: /*#__PURE__*/ jsx_runtime_.jsx(MaskConfig, {
                        mask: editingMask,
                        updateMask: (updater)=>maskStore.update(editingMaskId, updater),
                        readonly: editingMask.builtin
                    })
                })
            })
        ]
    });
}


/***/ }),

/***/ 73071:
/***/ ((module) => {

// Exports
module.exports = {
	"chat-input-actions": "chat_chat-input-actions__mwYC_",
	"chat-input-action": "chat_chat-input-action__DMW7Y",
	"slide-in": "chat_slide-in__nvZgA",
	"text": "chat_text__TkPfN",
	"icon": "chat_icon__Ly3TN",
	"prompt-toast": "chat_prompt-toast___VCUf",
	"prompt-toast-inner": "chat_prompt-toast-inner__f17E6",
	"slide-in-from-top": "chat_slide-in-from-top__Q0KCt",
	"prompt-toast-content": "chat_prompt-toast-content__9sp_w",
	"section-title": "chat_section-title__BiPko",
	"section-title-action": "chat_section-title-action__bmruw",
	"context-prompt": "chat_context-prompt__cbach",
	"context-prompt-insert": "chat_context-prompt-insert__UmNJi",
	"context-prompt-row": "chat_context-prompt-row__3Kbix",
	"context-drag": "chat_context-drag__BX7lh",
	"context-role": "chat_context-role__7_IR9",
	"context-content": "chat_context-content__sNXUy",
	"context-delete-button": "chat_context-delete-button__C_BmS",
	"context-prompt-button": "chat_context-prompt-button__AoPsw",
	"memory-prompt": "chat_memory-prompt__vOzcn",
	"memory-prompt-content": "chat_memory-prompt-content__kUVKj",
	"clear-context": "chat_clear-context__ke8Iw",
	"clear-context-tips": "chat_clear-context-tips__L1A_i",
	"clear-context-revert-btn": "chat_clear-context-revert-btn___Wna1",
	"chat": "chat_chat__ZebHg",
	"chat-body": "chat_chat-body__QFv5x",
	"chat-body-main-title": "chat_chat-body-main-title__jUL6h",
	"chat-body-title": "chat_chat-body-title__d2ItC",
	"chat-message": "chat_chat-message__dg8rL",
	"chat-message-user": "chat_chat-message-user__ZtTEj",
	"chat-message-header": "chat_chat-message-header__Dny_K",
	"chat-message-actions": "chat_chat-message-actions__H90hg",
	"chat-message-container": "chat_chat-message-container__O_X8_",
	"chat-message-edit": "chat_chat-message-edit__h58of",
	"chat-message-avatar": "chat_chat-message-avatar__3QeMq",
	"chat-message-status": "chat_chat-message-status__zc9Ad",
	"chat-message-item": "chat_chat-message-item__dKqMl",
	"chat-message-action-date": "chat_chat-message-action-date__RsXTn",
	"chat-input-panel": "chat_chat-input-panel__rO72m",
	"prompt-hints": "chat_prompt-hints__VT_Oi",
	"prompt-hint": "chat_prompt-hint__2616t",
	"hint-title": "chat_hint-title__E53ZK",
	"hint-content": "chat_hint-content__y2yj4",
	"prompt-hint-selected": "chat_prompt-hint-selected__o3vYi",
	"chat-input-panel-inner": "chat_chat-input-panel-inner___IQHi",
	"chat-input": "chat_chat-input__PQ_oF",
	"chat-input-send": "chat_chat-input-send__GFQZo"
};


/***/ }),

/***/ 35390:
/***/ ((module) => {

// Exports
module.exports = {
	"mask-page": "mask_mask-page__ou14k",
	"mask-page-body": "mask_mask-page-body__kBXsJ",
	"mask-filter": "mask_mask-filter__OdpU3",
	"slide-in": "mask_slide-in__unpXH",
	"search-bar": "mask_search-bar__7_Msn",
	"mask-filter-lang": "mask_mask-filter-lang__mRxyv",
	"mask-create": "mask_mask-create__BjAzk",
	"mask-item": "mask_mask-item__dinia",
	"mask-header": "mask_mask-header__RXJXI",
	"mask-icon": "mask_mask-icon__wO1ER",
	"mask-title": "mask_mask-title__IDEbR",
	"mask-name": "mask_mask-name__77Rjh",
	"mask-info": "mask_mask-info__2gtiu",
	"mask-actions": "mask_mask-actions__rsWn_",
	"slide-in-from-top": "mask_slide-in-from-top__DOEYB"
};


/***/ })

};
;